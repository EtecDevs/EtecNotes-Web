<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Firebase</title>
</head>
<body>
    <h1>Teste de Conex√£o Firebase</h1>
    <div id="status">Testando...</div>
    <button onclick="testarLogin()">Testar Login</button>
    
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, signInWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        
        const firebaseConfig = {
            apiKey: "AIzaSyBTwYLOnCJAEqDAxxJGn_Yb1XnD0u1XWl0",
            authDomain: "etecnotes.firebaseapp.com",
            projectId: "etecnotes",
            storageBucket: "etecnotes.firebasestorage.app",
            messagingSenderId: "268058028102",
            appId: "1:268058028102:web:4d953d3a48b7f2e6dff8bf",
            measurementId: "G-GNHEMZSM1L"
        };
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        
        const statusDiv = document.getElementById('status');
        
        // Teste de inicializa√ß√£o
        statusDiv.innerHTML += '<br>‚úÖ Firebase inicializado';
        statusDiv.innerHTML += '<br>üì° Projeto: ' + firebaseConfig.projectId;
        statusDiv.innerHTML += '<br>üåê Auth Domain: ' + firebaseConfig.authDomain;
        
        // Teste de DNS
        fetch('https://etecnotes.firebaseapp.com/__/auth/handler')
            .then(() => {
                statusDiv.innerHTML += '<br>‚úÖ DNS resolve corretamente';
            })
            .catch((error) => {
                statusDiv.innerHTML += '<br>‚ùå Erro de DNS: ' + error.message;
                statusDiv.innerHTML += '<br>‚ö†Ô∏è PROBLEMA: Seu navegador n√£o consegue acessar o Firebase!';
                statusDiv.innerHTML += '<br>üí° SOLU√á√ïES:';
                statusDiv.innerHTML += '<br>  1. Verifique sua conex√£o com a internet';
                statusDiv.innerHTML += '<br>  2. Desative VPN/Proxy se estiver usando';
                statusDiv.innerHTML += '<br>  3. Verifique se o firewall est√° bloqueando o Firebase';
                statusDiv.innerHTML += '<br>  4. Tente em outro navegador';
            });
        
        window.testarLogin = async function() {
            try {
                statusDiv.innerHTML += '<br>üîÑ Tentando login...';
                const userCredential = await signInWithEmailAndPassword(auth, 'aluno@teste.com', '123456');
                statusDiv.innerHTML += '<br>‚úÖ LOGIN OK! UID: ' + userCredential.user.uid;
            } catch (error) {
                statusDiv.innerHTML += '<br>‚ùå Erro no login: ' + error.code;
                statusDiv.innerHTML += '<br>üìù Mensagem: ' + error.message;
                
                if (error.code === 'auth/network-request-failed') {
                    statusDiv.innerHTML += '<br><br>üö® DIAGN√ìSTICO:';
                    statusDiv.innerHTML += '<br>Seu computador n√£o consegue conectar aos servidores do Firebase.';
                    statusDiv.innerHTML += '<br><br>üí° SOLU√á√ïES POSS√çVEIS:';
                    statusDiv.innerHTML += '<br>1. Verifique se voc√™ est√° conectado √† internet';
                    statusDiv.innerHTML += '<br>2. Desative qualquer VPN ou proxy';
                    statusDiv.innerHTML += '<br>3. Verifique configura√ß√µes de firewall';
                    statusDiv.innerHTML += '<br>4. Tente usar outra rede (ex: dados m√≥veis)';
                    statusDiv.innerHTML += '<br>5. Verifique se googleapis.com est√° acess√≠vel';
                }
            }
        };
    </script>
</body>
</html>
